<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BackupChrono - Interactive UI Mockup</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f7fa;
            color: #2c3e50;
        }
        
        .container {
            display: flex;
            height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            padding: 20px 0;
            overflow-y: auto;
        }
        
        .logo {
            padding: 0 20px 30px;
            font-size: 24px;
            font-weight: bold;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }
        
        .logo span {
            color: #3498db;
        }
        
        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .nav-item:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .nav-item.active {
            background: #3498db;
            border-left: 4px solid #2980b9;
        }
        
        .nav-icon {
            width: 20px;
            text-align: center;
        }
        
        /* Main content */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .subtitle {
            color: #7f8c8d;
            margin-bottom: 30px;
        }
        
        /* Cards */
        .card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border-left: 4px solid #3498db;
        }
        
        .stat-card.success {
            border-left-color: #27ae60;
        }
        
        .stat-card.warning {
            border-left-color: #f39c12;
        }
        
        .stat-card.error {
            border-left-color: #e74c3c;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .stat-detail {
            color: #95a5a6;
            font-size: 13px;
        }
        
        /* Backup Sources Table */
        .sources-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .sources-table th {
            text-align: left;
            padding: 12px;
            background: #ecf0f1;
            font-weight: 600;
            font-size: 14px;
            color: #2c3e50;
        }
        
        .sources-table td {
            padding: 16px 12px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .sources-table tr:hover {
            background: #f8f9fa;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-success {
            background: #d4edda;
            color: #155724;
        }
        
        .status-running {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-success {
            background: #27ae60;
            color: white;
        }
        
        .btn-success:hover {
            background: #229954;
        }
        
        .btn-secondary {
            background: #95a5a6;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #7f8c8d;
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 13px;
        }
        
        /* Snapshot Browser */
        .snapshot-browser {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
            height: 600px;
        }
        
        .snapshot-list {
            background: white;
            border-radius: 8px;
            padding: 16px;
            overflow-y: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .snapshot-item {
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 6px;
            cursor: pointer;
            border: 1px solid #ecf0f1;
            transition: all 0.2s;
        }
        
        .snapshot-item:hover {
            border-color: #3498db;
            background: #f8f9fa;
        }
        
        .snapshot-item.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .snapshot-date {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .snapshot-size {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .file-browser {
            background: white;
            border-radius: 8px;
            padding: 16px;
            overflow-y: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .breadcrumb {
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 16px;
            font-size: 14px;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
            gap: 12px;
        }
        
        .file-item:hover {
            background: #f8f9fa;
        }
        
        .file-icon {
            width: 24px;
            text-align: center;
            font-size: 18px;
        }
        
        .file-name {
            flex: 1;
        }
        
        .file-size {
            color: #7f8c8d;
            font-size: 13px;
        }
        
        .file-actions {
            display: flex;
            gap: 8px;
        }
        
        /* Config History */
        .config-timeline {
            position: relative;
            padding-left: 40px;
        }
        
        .config-commit {
            position: relative;
            margin-bottom: 30px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 3px solid #3498db;
        }
        
        .config-commit::before {
            content: '';
            position: absolute;
            left: -44px;
            top: 20px;
            width: 12px;
            height: 12px;
            background: #3498db;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 0 0 2px #3498db;
        }
        
        .commit-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .commit-hash {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #7f8c8d;
        }
        
        .commit-message {
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .commit-meta {
            font-size: 13px;
            color: #7f8c8d;
        }
        
        .commit-diff {
            margin-top: 12px;
            padding: 12px;
            background: white;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        
        .diff-line {
            padding: 2px 0;
        }
        
        .diff-add {
            color: #27ae60;
        }
        
        .diff-remove {
            color: #e74c3c;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 8px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 22px;
            font-weight: 600;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .form-hint {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 4px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 24px;
        }
        
        /* Schedule display */
        .schedule-info {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 13px;
            color: #7f8c8d;
        }
        
        /* Alerts */
        .alert {
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }
        
        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border-left: 4px solid #ffc107;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <div class="logo">Backup<span>Chrono</span></div>
            <div class="nav-item active" data-page="dashboard">
                <span class="nav-icon">üìä</span>
                <span>Dashboard</span>
            </div>
            <div class="nav-item" data-page="config">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span>Configuration</span>
            </div>
            <div class="nav-item" data-page="notifications">
                <span class="nav-icon">üìß</span>
                <span>Notifications</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Page (P3 - Monitor Backup Health) -->
            <div class="page active" id="dashboard">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <h1 style="margin: 0;">Dashboard</h1>
                    <button class="btn btn-primary" onclick="showAddDeviceModal()">
                        <span>‚ûï</span> Add Device
                    </button>
                </div>
                <p class="subtitle">System overview and device management</p>

                <!-- Stats Overview -->
                <div class="stats-grid">
                    <div class="stat-card success">
                        <div class="stat-label">Success Rate</div>
                        <div class="stat-value">96%</div>
                        <div class="stat-detail">Last 30 days</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Backup Size</div>
                        <div class="stat-value">2.4 TB</div>
                        <div class="stat-detail">1.0 TB saved via deduplication (42%)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Active Devices</div>
                        <div class="stat-value">5</div>
                        <div class="stat-detail">12 shares configured</div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-label">Upcoming Backups</div>
                        <div class="stat-value">4</div>
                        <div class="stat-detail">Next in 2 hours</div>
                    </div>
                </div>

                <!-- Devices Overview -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Devices</h2>
                        <div style="color: #7f8c8d; font-size: 14px;">Click device to view backup history and restore files</div>
                    </div>
                    <table class="sources-table">
                        <thead>
                            <tr>
                                <th>Device</th>
                                <th>Shares</th>
                                <th>Status</th>
                                <th>Last Backup</th>
                                <th>Total Size</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="cursor: pointer;" onclick="viewDevice('office-nas')">
                                <td><strong>office-nas</strong><br><span style="font-size: 12px; color: #7f8c8d;">\\office-nas (SMB)</span></td>
                                <td>3 shares</td>
                                <td><span class="status-badge status-success">Success</span></td>
                                <td>2 hours ago</td>
                                <td>856 GB</td>
                            </tr>
                            <tr style="cursor: pointer;" onclick="viewDevice('web-server-1')">
                                <td><strong>web-server-1</strong><br><span style="font-size: 12px; color: #7f8c8d;">web1.example.com (SSH)</span></td>
                                <td>2 shares</td>
                                <td><span class="status-badge status-success">Success</span></td>
                                <td>4 hours ago</td>
                                <td>124 GB</td>
                            </tr>
                            <tr style="cursor: pointer;" onclick="viewDevice('db-server')">
                                <td><strong>db-server</strong><br><span style="font-size: 12px; color: #7f8c8d;">db.example.com (Rsync)</span></td>
                                <td>1 share</td>
                                <td><span class="status-badge status-running">Running</span></td>
                                <td>In progress</td>
                                <td>1.2 TB</td>
                            </tr>
                            <tr style="cursor: pointer;" onclick="viewDevice('dev-workstation')">
                                <td><strong>dev-workstation</strong><br><span style="font-size: 12px; color: #7f8c8d;">\\dev-pc (SMB)</span></td>
                                <td>2 shares</td>
                                <td><span class="status-badge status-error">Failed</span></td>
                                <td>1 day ago</td>
                                <td>-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Devices Page (P1 - Device Management) -->
            <div class="page" id="devices">
                <h1>Devices</h1>
                <p class="subtitle">Manage devices and their shares (Default ‚Üí Device ‚Üí Share cascade)</p>

                <div class="alert alert-success">
                    <span>‚úì</span>
                    <span>Configuration cascades: Global Defaults ‚Üí Device-Level ‚Üí Share-Level (most specific wins)</span>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Configured Devices</h2>
                        <button class="btn btn-primary" onclick="showAddDeviceModal()">
                            <span>‚ûï</span> Add Device
                        </button>
                    </div>
                    <table class="sources-table">
                        <thead>
                            <tr>
                                <th>Device Name</th>
                                <th>Protocol</th>
                                <th>Host</th>
                                <th>Shares</th>
                                <th>Device Schedule</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr onclick="viewDevice('office-nas')" style="cursor: pointer;">
                                <td><strong>office-nas</strong></td>
                                <td>SMB/CIFS</td>
                                <td>\\office-nas</td>
                                <td>3 shares</td>
                                <td><span class="schedule-info">üïê Daily 2:00 AM</span></td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn btn-small btn-secondary">Edit Device</button>
                                    <button class="btn btn-small btn-primary" onclick="showAddShareModal('office-nas')">Add Share</button>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6" style="background: #f8f9fa; padding-left: 40px;">
                                    <div style="padding: 8px 0;">
                                        <strong>üìÅ /shared</strong> - Daily 2:00 AM <em style="color: #7f8c8d;">(inherited)</em> ‚Ä¢ 342 GB
                                        <button class="btn btn-small btn-secondary" style="margin-left: 12px;">Edit Share</button>
                                    </div>
                                    <div style="padding: 8px 0;">
                                        <strong>üìÅ /backup</strong> - Every 6 hours <em style="color: #3498db;">(override)</em> ‚Ä¢ 412 GB
                                        <button class="btn btn-small btn-secondary" style="margin-left: 12px;">Edit Share</button>
                                    </div>
                                    <div style="padding: 8px 0;">
                                        <strong>üìÅ /archive</strong> - Daily 2:00 AM <em style="color: #7f8c8d;">(inherited)</em> ‚Ä¢ 102 GB
                                        <button class="btn btn-small btn-secondary" style="margin-left: 12px;">Edit Share</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewDevice('web-server-1')" style="cursor: pointer;">
                                <td><strong>web-server-1</strong></td>
                                <td>SSH/SFTP</td>
                                <td>web1.example.com</td>
                                <td>2 shares</td>
                                <td><span class="schedule-info">üïê Every 4 hours</span></td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn btn-small btn-secondary">Edit Device</button>
                                    <button class="btn btn-small btn-primary" onclick="showAddShareModal('web-server-1')">Add Share</button>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6" style="background: #f8f9fa; padding-left: 40px;">
                                    <div style="padding: 8px 0;">
                                        <strong>üìÅ /var/www</strong> - Every 4 hours <em style="color: #7f8c8d;">(inherited)</em> ‚Ä¢ 89 GB
                                        <button class="btn btn-small btn-secondary" style="margin-left: 12px;">Edit Share</button>
                                    </div>
                                    <div style="padding: 8px 0;">
                                        <strong>üìÅ /etc</strong> - Every 4 hours <em style="color: #7f8c8d;">(inherited)</em> ‚Ä¢ 35 GB
                                        <button class="btn btn-small btn-secondary" style="margin-left: 12px;">Edit Share</button>
                                    </div>
                                </td>
                            </tr>
                            <tr onclick="viewDevice('db-server')" style="cursor: pointer;">
                                <td><strong>db-server</strong></td>
                                <td>Rsync</td>
                                <td>db.example.com</td>
                                <td>1 share</td>
                                <td><span class="schedule-info">üïê Daily 11:00 PM</span></td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn btn-small btn-secondary">Edit Device</button>
                                    <button class="btn btn-small btn-primary" onclick="showAddShareModal('db-server')">Add Share</button>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6" style="background: #f8f9fa; padding-left: 40px;">
                                    <div style="padding: 8px 0;">
                                        <strong>üìÅ /backups</strong> - Daily 11:00 PM <em style="color: #7f8c8d;">(inherited)</em> ‚Ä¢ 1.2 TB
                                        <button class="btn btn-small btn-secondary" style="margin-left: 12px;">Edit Share</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Device Detail Page (P3 - Monitor Device History) -->
            <div class="page" id="device-detail">
                <h1>Device: office-nas</h1>
                <p class="subtitle">Backup history and overview for this device</p>

                <div style="margin-bottom: 20px;">
                    <button class="btn btn-secondary" onclick="navigateTo('dashboard')">‚Üê Back to Dashboard</button>
                    <button class="btn btn-primary" onclick="runDeviceBackupNow('office-nas')">Run Backup Now (All Shares)</button>
                    <button class="btn btn-secondary" onclick="navigateTo('device-settings')">Edit Device</button>
                </div>

                <!-- Device Info -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Protocol</div>
                        <div class="stat-value" style="font-size: 20px;">SMB/CIFS</div>
                        <div class="stat-detail">\\office-nas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Configured Shares</div>
                        <div class="stat-value">3</div>
                        <div class="stat-detail">/shared, /backup, /archive</div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-label">Last Backup</div>
                        <div class="stat-value" style="font-size: 20px;">2h ago</div>
                        <div class="stat-detail">Success - All shares</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Size</div>
                        <div class="stat-value" style="font-size: 24px;">856 GB</div>
                        <div class="stat-detail">Across all shares</div>
                    </div>
                </div>

                <!-- Shares Configuration -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Shares</h2>
                        <button class="btn btn-primary" onclick="showAddShareModal('office-nas')">
                            <span>‚ûï</span> Add Share
                        </button>
                    </div>
                    <div class="alert alert-info" style="margin-bottom: 16px;">
                        <span>‚ÑπÔ∏è</span>
                        <span>Configuration cascade: Global ‚Üí Device ‚Üí Share (most specific wins)</span>
                    </div>
                    <table class="sources-table">
                        <thead>
                            <tr>
                                <th>Share Path</th>
                                <th>Schedule</th>
                                <th>Retention</th>
                                <th>Exclusions</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>üìÅ /shared</strong></td>
                                <td>
                                    Daily 2:00 AM
                                    <br><span style="font-size: 12px; color: #7f8c8d;">Inherited from device</span>
                                </td>
                                <td>
                                    7D / 4W / 12M
                                    <br><span style="font-size: 12px; color: #7f8c8d;">Inherited from global</span>
                                </td>
                                <td><span style="color: #7f8c8d;">None</span></td>
                                <td>
                                    <button class="btn btn-small btn-secondary" onclick="navigateTo('share-settings')">Edit</button>
                                    <button class="btn btn-small btn-primary" onclick="alert('Run backup: /shared')">Run Now</button>
                                </td>
                            </tr>
                            <tr style="background: #fffbea;">
                                <td><strong>üìÅ /backup</strong></td>
                                <td>
                                    Every 6 hours
                                    <br><span style="font-size: 12px; color: #3498db;">‚ö†Ô∏è Override</span>
                                </td>
                                <td>
                                    30D / 8W / 24M
                                    <br><span style="font-size: 12px; color: #3498db;">‚ö†Ô∏è Override</span>
                                </td>
                                <td><span style="color: #7f8c8d;">None</span></td>
                                <td>
                                    <button class="btn btn-small btn-secondary" onclick="alert('Edit share: /backup')">Edit</button>
                                    <button class="btn btn-small btn-primary" onclick="alert('Run backup: /backup')">Run Now</button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>üìÅ /archive</strong></td>
                                <td>
                                    Daily 2:00 AM
                                    <br><span style="font-size: 12px; color: #7f8c8d;">Inherited from device</span>
                                </td>
                                <td>
                                    7D / 4W / 12M
                                    <br><span style="font-size: 12px; color: #7f8c8d;">Inherited from global</span>
                                </td>
                                <td>
                                    *.tmp, *.log
                                    <br><span style="font-size: 12px; color: #3498db;">‚ö†Ô∏è Custom patterns</span>
                                </td>
                                <td>
                                    <button class="btn btn-small btn-secondary" onclick="alert('Edit share: /archive')">Edit</button>
                                    <button class="btn btn-small btn-primary" onclick="alert('Run backup: /archive')">Run Now</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Backup History -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Backup History</h2>
                    </div>
                    <table class="sources-table">
                        <thead>
                            <tr>
                                <th>Snapshot Date</th>
                                <th>Status</th>
                                <th>Shares Backed Up</th>
                                <th>Duration</th>
                                <th>Size</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="cursor: pointer;" onclick="browseDeviceSnapshot('office-nas', '2025-12-30')">
                                <td><strong>Dec 30, 2025 2:00 AM</strong></td>
                                <td><span class="status-badge status-success">Success</span></td>
                                <td>3 of 3 shares</td>
                                <td>12 min</td>
                                <td>856 GB</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn btn-small btn-primary" onclick="browseDeviceSnapshot('office-nas', '2025-12-30')">Browse Files</button>
                                </td>
                            </tr>
                            <tr style="cursor: pointer;" onclick="browseDeviceSnapshot('office-nas', '2025-12-29')">
                                <td><strong>Dec 29, 2025 2:00 AM</strong></td>
                                <td><span class="status-badge status-success">Success</span></td>
                                <td>3 of 3 shares</td>
                                <td>11 min</td>
                                <td>854 GB</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn btn-small btn-primary" onclick="browseDeviceSnapshot('office-nas', '2025-12-29')">Browse Files</button>
                                </td>
                            </tr>
                            <tr style="cursor: pointer;" onclick="browseDeviceSnapshot('office-nas', '2025-12-28')">
                                <td><strong>Dec 28, 2025 2:00 AM</strong></td>
                                <td><span class="status-badge status-success">Success</span></td>
                                <td>3 of 3 shares</td>
                                <td>13 min</td>
                                <td>850 GB</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn btn-small btn-primary" onclick="browseDeviceSnapshot('office-nas', '2025-12-28')">Browse Files</button>
                                </td>
                            </tr>
                            <tr style="cursor: pointer;">
                                <td><strong>Dec 27, 2025 2:00 AM</strong></td>
                                <td><span class="status-badge status-success">Success</span></td>
                                <td>3 of 3 shares</td>
                                <td>14 min</td>
                                <td>847 GB</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn btn-small btn-primary">Browse Files</button>
                                </td>
                            </tr>
                            <tr style="cursor: pointer;">
                                <td><strong>Dec 26, 2025 2:00 AM</strong></td>
                                <td><span class="status-badge status-success">Success</span></td>
                                <td>3 of 3 shares</td>
                                <td>12 min</td>
                                <td>845 GB</td>
                                <td onclick="event.stopPropagation()">
                                    <button class="btn btn-small btn-primary">Browse Files</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Device Settings Page (Reusable for device editing) -->
            <div class="page" id="device-settings">
                <h1>Edit Device: office-nas</h1>
                <p class="subtitle">Configure device connection and default settings</p>

                <div style="margin-bottom: 20px;">
                    <button class="btn btn-secondary" onclick="navigateTo('device-detail')">‚Üê Back to Device</button>
                    <button class="btn btn-primary" onclick="alert('‚úì Device settings saved!'); navigateTo('device-detail')">Save Changes</button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Connection Settings</h2>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Device Name</label>
                        <input type="text" class="form-input" value="office-nas" style="max-width: 300px;">
                        <div class="form-hint">Unique identifier for this device</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Protocol</label>
                        <select class="form-select" style="max-width: 300px;">
                            <option value="smb" selected>SMB/CIFS</option>
                            <option value="ssh">SSH/SFTP</option>
                            <option value="rsync">Rsync</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Host / Address</label>
                        <input type="text" class="form-input" value="\\\\office-nas" style="max-width: 400px;">
                        <div class="form-hint">Hostname, IP address, or UNC path</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Username</label>
                        <input type="text" class="form-input" value="admin" style="max-width: 300px;">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" value="********" style="max-width: 300px;">
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Device-Level Schedule</h2>
                    </div>
                    <div class="alert alert-info">
                        <span>‚ÑπÔ∏è</span>
                        <span>Shares will inherit this schedule unless they define their own override</span>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Backup Schedule (Cron)</label>
                        <input type="text" class="form-input" value="0 2 * * *" style="max-width: 300px;">
                        <div class="form-hint">Daily at 2:00 AM - <a href="#" onclick="alert('Cron format: minute hour day month weekday')">Help</a></div>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox"> Override global schedule (if unchecked, inherits from global)
                        </label>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Device-Level Retention</h2>
                    </div>
                    <div class="alert alert-info">
                        <span>‚ÑπÔ∏è</span>
                        <span>Shares will inherit this retention policy unless they define their own override</span>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox"> Override global retention (if unchecked, inherits from global)
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Latest Snapshots</label>
                        <input type="number" class="form-input" value="7" style="max-width: 200px;">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Daily Snapshots</label>
                        <input type="number" class="form-input" value="7" style="max-width: 200px;">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Weekly Snapshots</label>
                        <input type="number" class="form-input" value="4" style="max-width: 200px;">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Monthly Snapshots</label>
                        <input type="number" class="form-input" value="12" style="max-width: 200px;">
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Advanced</h2>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" checked> Device enabled (uncheck to pause all shares)
                        </label>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-danger" onclick="if(confirm('Delete device \"office-nas\" and all backup history?')) alert('Device deleted')">Delete Device</button>
                    </div>
                </div>
            </div>

            <!-- Share Settings Page (Reusable for share editing) -->
            <div class="page" id="share-settings">
                <h1>Edit Share: /shared</h1>
                <p class="subtitle">Configure share-specific settings (overrides device and global defaults)</p>

                <div style="margin-bottom: 20px;">
                    <button class="btn btn-secondary" onclick="navigateTo('device-detail')">‚Üê Back to Device</button>
                    <button class="btn btn-primary" onclick="alert('‚úì Share settings saved!'); navigateTo('device-detail')">Save Changes</button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Share Path</h2>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Path on Device</label>
                        <input type="text" class="form-input" value="/shared" style="max-width: 400px;">
                        <div class="form-hint">Absolute path on the device (office-nas)</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Share-Level Schedule (Override)</h2>
                    </div>
                    <div class="alert alert-info">
                        <span>‚ÑπÔ∏è</span>
                        <span>Current: Inherits from device (Daily 2:00 AM)</span>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox"> Override device schedule
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Backup Schedule (Cron)</label>
                        <input type="text" class="form-input" value="0 2 * * *" style="max-width: 300px;" disabled>
                        <div class="form-hint">Enable override to customize</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Share-Level Retention (Override)</h2>
                    </div>
                    <div class="alert alert-info">
                        <span>‚ÑπÔ∏è</span>
                        <span>Current: Inherits from global (7D / 4W / 12M)</span>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox"> Override retention policy
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Latest Snapshots</label>
                        <input type="number" class="form-input" value="7" style="max-width: 200px;" disabled>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Daily Snapshots</label>
                        <input type="number" class="form-input" value="7" style="max-width: 200px;" disabled>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Exclusions</h2>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Exclude Patterns (share-specific)</label>
                        <textarea class="form-textarea" placeholder="*.tmp\n*.log">*.tmp
*.log</textarea>
                        <div class="form-hint">Glob patterns to exclude from this share only (in addition to global exclusions)</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Advanced</h2>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" checked> Share enabled
                        </label>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-danger" onclick="if(confirm('Delete share \"/shared\" and all backup history?')) alert('Share deleted')">Delete Share</button>
                    </div>
                </div>
            </div>

            <!-- Backup Sources Page (P1 - Automated Scheduled Backups, P4 - Configure via Web UI) -->
            <div class="page" id="sources">
                <h1>Backup Sources</h1>
                <p class="subtitle">Manage automated backup sources and schedules</p>

                <div class="alert alert-info">
                    <span>‚ÑπÔ∏è</span>
                    <span>Backups run automatically according to configured schedules. No manual intervention required.</span>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Configured Sources</h2>
                        <button class="btn btn-primary" onclick="showAddSourceModal()">
                            <span>‚ûï</span> Add Backup Source
                        </button>
                    </div>
                    <table class="sources-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Type</th>
                                <th>Path</th>
                                <th>Schedule</th>
                                <th>Retention</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>office-nas</strong></td>
                                <td>SMB/CIFS</td>
                                <td>\\office-nas\shared</td>
                                <td><span class="schedule-info">üïê Daily 2:00 AM</span></td>
                                <td>7D / 4W / 12M</td>
                                <td>
                                    <button class="btn btn-small btn-secondary">Edit</button>
                                    <button class="btn btn-small btn-primary" onclick="runBackupNow('office-nas')">Run Now</button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>web-server-1</strong></td>
                                <td>SSH/SFTP</td>
                                <td>ssh://web1.example.com/var/www</td>
                                <td><span class="schedule-info">üïê Every 6 hours</span></td>
                                <td>14D / 8W / 6M</td>
                                <td>
                                    <button class="btn btn-small btn-secondary">Edit</button>
                                    <button class="btn btn-small btn-primary">Run Now</button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>db-server</strong></td>
                                <td>Rsync</td>
                                <td>rsync://db.example.com/backups</td>
                                <td><span class="schedule-info">üïê Daily 11:00 PM</span></td>
                                <td>30D / 12W / 24M</td>
                                <td>
                                    <button class="btn btn-small btn-secondary">Edit</button>
                                    <button class="btn btn-small btn-primary">Run Now</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Browse & Restore Page (P2 - Restore Files from Backups) -->
            <div class="page" id="browse">
                <h1>Browse & Restore</h1>
                <p class="subtitle">Browse device snapshots and restore files (Device ‚Üí Snapshot ‚Üí Share ‚Üí Files)</p>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Select Device</h2>
                    </div>
                    <select class="form-select" onchange="loadSnapshots(this.value)" style="max-width: 400px;">
                        <option value="">-- Select a device --</option>
                        <option value="office-nas" selected>office-nas (SMB: \\office-nas)</option>
                        <option value="web-server-1">web-server-1 (SSH: web1.example.com)</option>
                        <option value="db-server">db-server (Rsync: db.example.com)</option>
                    </select>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Select Snapshot (office-nas)</h2>
                    </div>
                    <div class="snapshot-grid">
                        <div class="snapshot-item active" onclick="selectSnapshot(this, '2025-12-30')">
                            <div class="snapshot-date">Dec 30, 2025</div>
                            <div class="snapshot-time">2:00 AM</div>
                            <div class="snapshot-status">‚úì Success - All 3 shares</div>
                            <div class="snapshot-size">856 GB</div>
                        </div>
                        <div class="snapshot-item" onclick="selectSnapshot(this, '2025-12-29')">
                            <div class="snapshot-date">Dec 29, 2025</div>
                            <div class="snapshot-time">2:00 AM</div>
                            <div class="snapshot-status">‚úì Success - All 3 shares</div>
                            <div class="snapshot-size">854 GB</div>
                        </div>
                        <div class="snapshot-item" onclick="selectSnapshot(this, '2025-12-28')">
                            <div class="snapshot-date">Dec 28, 2025</div>
                            <div class="snapshot-time">2:00 AM</div>
                            <div class="snapshot-status">‚úì Success - All 3 shares</div>
                            <div class="snapshot-size">850 GB</div>
                        </div>
                        <div class="snapshot-item" onclick="selectSnapshot(this, '2025-12-27')">
                            <div class="snapshot-date">Dec 27, 2025</div>
                            <div class="snapshot-time">2:00 AM</div>
                            <div class="snapshot-status">‚úì Success - All 3 shares</div>
                            <div class="snapshot-size">847 GB</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Select Share (Dec 30, 2025 2:00 AM)</h2>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                        <div class="stat-card" style="cursor: pointer;" onclick="alert('Browsing share: /shared')">
                            <div class="stat-label">Share</div>
                            <div class="stat-value" style="font-size: 20px;">üìÅ /shared</div>
                            <div class="stat-detail">342 GB ‚Ä¢ 12,456 files</div>
                            <button class="btn btn-primary" style="margin-top: 12px; width: 100%;">Browse Files</button>
                        </div>
                        <div class="stat-card" style="cursor: pointer;" onclick="alert('Browsing share: /backup')">
                            <div class="stat-label">Share</div>
                            <div class="stat-value" style="font-size: 20px;">üìÅ /backup</div>
                            <div class="stat-detail">412 GB ‚Ä¢ 8,234 files</div>
                            <button class="btn btn-primary" style="margin-top: 12px; width: 100%;">Browse Files</button>
                        </div>
                        <div class="stat-card" style="cursor: pointer;" onclick="alert('Browsing share: /archive')">
                            <div class="stat-label">Share</div>
                            <div class="stat-value" style="font-size: 20px;">üìÅ /archive</div>
                            <div class="stat-detail">102 GB ‚Ä¢ 3,567 files</div>
                            <button class="btn btn-primary" style="margin-top: 12px; width: 100%;">Browse Files</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Browse Files (office-nas ‚Üí Dec 30, 2025 ‚Üí /shared)</h2>
                        <div>
                            <button class="btn btn-secondary">‚Ü©Ô∏è Restore Entire Share to Source</button>
                        </div>
                        
                        <div class="file-browser">
                            <div class="breadcrumb">
                                <span>üìÅ office-nas ‚Üí /shared ‚Üí Documents ‚Üí Projects</span>
                            </div>
                            
                            <div class="file-item" onclick="navigateFolder(this)">
                                <span class="file-icon">üìÅ</span>
                                <span class="file-name">2024-Reports</span>
                                <span class="file-size">45 files</span>
                                <div class="file-actions">
                                    <button class="btn btn-small btn-primary">Browse</button>
                                </div>
                            </div>
                            
                            <div class="file-item" onclick="navigateFolder(this)">
                                <span class="file-icon">üìÅ</span>
                                <span class="file-name">Client-Work</span>
                                <span class="file-size">128 files</span>
                                <div class="file-actions">
                                    <button class="btn btn-small btn-primary">Browse</button>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <span class="file-icon">üìÑ</span>
                                <span class="file-name">Q4-Summary.xlsx</span>
                                <span class="file-size">2.4 MB</span>
                                <div class="file-actions">
                                    <button class="btn btn-small btn-success" onclick="restoreFile('Q4-Summary.xlsx')">‚¨áÔ∏è Download</button>
                                    <button class="btn btn-small btn-primary" onclick="restoreToSource('Q4-Summary.xlsx')">‚Ü©Ô∏è Restore to Source</button>
                                    <button class="btn btn-small btn-secondary" onclick="showFileHistory('Q4-Summary.xlsx')">üìú History</button>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <span class="file-icon">üìÑ</span>
                                <span class="file-name">Budget-2025.pdf</span>
                                <span class="file-size">1.8 MB</span>
                                <div class="file-actions">
                                    <button class="btn btn-small btn-success">‚¨áÔ∏è Download</button>
                                    <button class="btn btn-small btn-primary">‚Ü©Ô∏è Restore to Source</button>
                                    <button class="btn btn-small btn-secondary">üìú History</button>
                                </div>
                            </div>
                            
                            <div class="file-item">
                                <span class="file-icon">üìÑ</span>
                                <span class="file-name">Meeting-Notes.docx</span>
                                <span class="file-size">342 KB</span>
                                <div class="file-actions">
                                    <button class="btn btn-small btn-success">‚¨áÔ∏è Download</button>
                                    <button class="btn btn-small btn-primary">‚Ü©Ô∏è Restore to Source</button>
                                    <button class="btn btn-small btn-secondary">üìú History</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Configuration Page (P4 - Configure Backup Sources via Web UI) -->
            <div class="page" id="config">
                <h1>Configuration</h1>
                <p class="subtitle">Configure backup policies and settings</p>

                <div class="alert alert-success">
                    <span>‚úì</span>
                    <span>All configuration changes are automatically committed to Git repository</span>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Global Retention Policy</h2>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Latest Snapshots</label>
                        <input type="number" class="form-input" value="7" style="max-width: 200px;">
                        <div class="form-hint">Keep the 7 most recent snapshots</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Daily Snapshots</label>
                        <input type="number" class="form-input" value="7" style="max-width: 200px;">
                        <div class="form-hint">Keep one snapshot per day for 7 days</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Weekly Snapshots</label>
                        <input type="number" class="form-input" value="4" style="max-width: 200px;">
                        <div class="form-hint">Keep one snapshot per week for 4 weeks</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Monthly Snapshots</label>
                        <input type="number" class="form-input" value="12" style="max-width: 200px;">
                        <div class="form-hint">Keep one snapshot per month for 12 months</div>
                    </div>
                    <button class="btn btn-primary" onclick="saveConfig()">Save Configuration</button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Global Exclude Patterns</h2>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Exclude Patterns (glob)</label>
                        <textarea class="form-textarea" placeholder="*.tmp&#10;*.log&#10;node_modules/&#10;.git/">*.tmp
*.log
node_modules/
.git/
__pycache__/</textarea>
                        <div class="form-hint">Files and directories matching these patterns will be excluded from all backups</div>
                    </div>
                    <button class="btn btn-primary" onclick="saveConfig()">Save Configuration</button>
                </div>

                <!-- Configuration History Section (P2 - Version-Controlled Configuration with Git) -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Configuration History (Git)</h2>
                    </div>
                    <div class="config-timeline">
                        <div class="config-commit">
                            <div class="commit-header">
                                <div>
                                    <div class="commit-message">Added new backup source: db-server</div>
                                    <div class="commit-meta">by admin ‚Ä¢ 2 hours ago</div>
                                </div>
                                <div class="commit-hash">#a3f8d92</div>
                            </div>
                            <div class="commit-diff">
                                <div class="diff-line diff-add">+ sources:</div>
                                <div class="diff-line diff-add">+   db-server:</div>
                                <div class="diff-line diff-add">+     type: rsync</div>
                                <div class="diff-line diff-add">+     host: db.example.com</div>
                                <div class="diff-line diff-add">+     path: /backups</div>
                                <div class="diff-line diff-add">+     schedule: "0 23 * * *"</div>
                            </div>
                            <button class="btn btn-small btn-secondary" style="margin-top: 8px;" onclick="rollbackConfig('a3f8d92')">‚Ü©Ô∏è Rollback to this version</button>
                        </div>

                        <div class="config-commit">
                            <div class="commit-header">
                                <div>
                                    <div class="commit-message">Updated retention policy for office-nas</div>
                                    <div class="commit-meta">by admin ‚Ä¢ 1 day ago</div>
                                </div>
                                <div class="commit-hash">#7b2c541</div>
                            </div>
                            <div class="commit-diff">
                                <div class="diff-line">  sources:</div>
                                <div class="diff-line">    office-nas:</div>
                                <div class="diff-line">      retention:</div>
                                <div class="diff-line diff-remove">-       daily: 7</div>
                                <div class="diff-line diff-add">+       daily: 14</div>
                            </div>
                            <button class="btn btn-small btn-secondary" style="margin-top: 8px;">‚Ü©Ô∏è Rollback to this version</button>
                        </div>

                        <div class="config-commit">
                            <div class="commit-header">
                                <div>
                                    <div class="commit-message">Added global exclude pattern for .DS_Store files</div>
                                    <div class="commit-meta">by admin ‚Ä¢ 3 days ago</div>
                                </div>
                                <div class="commit-hash">#c9e4f21</div>
                            </div>
                            <div class="commit-diff">
                                <div class="diff-line">  global:</div>
                                <div class="diff-line">    exclude:</div>
                                <div class="diff-line diff-add">+     - "*.DS_Store"</div>
                            </div>
                            <button class="btn btn-small btn-secondary" style="margin-top: 8px;">‚Ü©Ô∏è Rollback to this version</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notifications Page (P3 - Email Notifications) -->
            <div class="page" id="notifications">
                <h1>Notifications</h1>
                <p class="subtitle">Configure email alerts and notifications</p>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Email Settings</h2>
                    </div>
                    <div class="form-group">
                        <label class="form-label">SMTP Server</label>
                        <input type="text" class="form-input" value="smtp.example.com" placeholder="smtp.example.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">SMTP Port</label>
                        <input type="number" class="form-input" value="587" placeholder="587" style="max-width: 150px;">
                    </div>
                    <div class="form-group">
                        <label class="form-label">From Address</label>
                        <input type="email" class="form-input" value="backup@example.com" placeholder="backup@example.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Recipients</label>
                        <textarea class="form-textarea" placeholder="admin@example.com&#10;team@example.com">admin@example.com
ops@example.com</textarea>
                        <div class="form-hint">One email address per line</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Notification Preferences</h2>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" checked> Send alerts on backup failures
                        </label>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" checked> Send critical alerts (storage full, system errors)
                        </label>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" checked> Send daily summary emails
                        </label>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox"> Send notifications on successful backups
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Daily Summary Time</label>
                        <input type="time" class="form-input" value="08:00" style="max-width: 150px;">
                        <div class="form-hint">Time to send daily summary email</div>
                    </div>
                    <button class="btn btn-primary" onclick="saveNotifications()">Save Notification Settings</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Backup Source Modal -->
    <div class="modal" id="addSourceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add Backup Source</h2>
                <button class="close-btn" onclick="closeModal('addSourceModal')">&times;</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Source Name</label>
                <input type="text" class="form-input" placeholder="e.g., production-server">
            </div>
            
            <div class="form-group">
                <label class="form-label">Protocol</label>
                <select class="form-select">
                    <option>SMB/CIFS</option>
                    <option>SSH/SFTP</option>
                    <option>Rsync</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">Host/Path</label>
                <input type="text" class="form-input" placeholder="\\server\share or ssh://host/path">
            </div>
            
            <div class="form-group">
                <label class="form-label">Username</label>
                <input type="text" class="form-input" placeholder="username">
            </div>
            
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>
            
            <div class="form-group">
                <label class="form-label">Schedule</label>
                <input type="text" class="form-input" placeholder="0 2 * * * (cron format)" value="0 2 * * *">
                <div class="form-hint">Daily at 2:00 AM</div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('addSourceModal')">Cancel</button>
                <button class="btn btn-primary" onclick="addSource()">Add Source</button>
            </div>
        </div>
    </div>

    <script>
        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                const page = item.dataset.page;
                
                // Update active nav item
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                
                // Show corresponding page
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.getElementById(page).classList.add('active');
            });
        });

        // Modal functions
        function showAddSourceModal() {
            document.getElementById('addSourceModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function addSource() {
            alert('‚úì New backup source added successfully!\n\nConfiguration has been committed to Git repository.');
            closeModal('addSourceModal');
        }

        // Snapshot browser
        function selectSnapshot(element, date) {
            document.querySelectorAll('.snapshot-item').forEach(item => {
                item.classList.remove('active');
            });
            element.classList.add('active');
            console.log('Selected snapshot:', date);
        }

        function loadSnapshots(source) {
            if (source) {
                console.log('Loading snapshots for:', source);
            }
        }

        function navigateFolder(element) {
            const folderName = element.querySelector('.file-name').textContent;
            alert(`üìÅ Navigating to: ${folderName}\n\n(In the full implementation, this would display the folder contents)`);
        }

        function restoreFile(filename) {
            alert(`‚¨áÔ∏è Downloading: ${filename}\n\n(In the full implementation, the file would be downloaded to your computer)`);
        }

        function restoreToSource(filename) {
            if (confirm(`‚Ü©Ô∏è Restore "${filename}" to original source location?\n\nThis will overwrite the existing file if it exists.`)) {
                alert(`‚úì File "${filename}" has been restored to the source successfully!`);
            }
        }

        function showFileHistory(filename) {
            alert(`üìú File History: ${filename}\n\n` +
                  `Dec 30, 2025 2:00 AM - 2.4 MB (current)\n` +
                  `Dec 29, 2025 2:00 AM - 2.4 MB (no change)\n` +
                  `Dec 28, 2025 2:00 AM - 2.3 MB (modified)\n` +
                  `Dec 25, 2025 2:00 AM - 2.1 MB (modified)\n\n` +
                  `(In the full implementation, you could compare versions and restore any historical version)`);
        }

        function runBackupNow(sourceName) {
            alert(`‚ñ∂Ô∏è Backup started for: ${sourceName}\n\nThe backup is now running in the background. You'll receive an email notification when it completes.`);
        }

        function saveConfig() {
            alert('‚úì Configuration saved successfully!\n\nChanges have been committed to Git repository with message:\n"Updated retention policy via web UI"');
        }

        function saveNotifications() {
            alert('‚úì Notification settings saved successfully!\n\nYou will now receive email alerts according to your preferences.');
        }

        function rollbackConfig(hash) {
            if (confirm(`‚Ü©Ô∏è Rollback configuration to commit ${hash}?\n\nThis will create a new commit that reverts to this version.`)) {
                alert(`‚úì Configuration rolled back successfully!\n\nNew commit created: "Rollback to ${hash}"`);
            }
        }

        // Device navigation functions
        function viewDevice(deviceName) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('device-detail').classList.add('active');
            // Update device detail page title
            document.querySelector('#device-detail h1').textContent = `Device: ${deviceName}`;
        }

        function browseDeviceSnapshot(deviceName, snapshotDate) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('browse').classList.add('active');
            // Pre-select device in browse page
            const sourceSelect = document.querySelector('#browse select');
            if (sourceSelect) {
                // Would update to show device name in real implementation
                console.log(`Browsing device: ${deviceName}, snapshot: ${snapshotDate}`);
            }
        }

        function runDeviceBackupNow(deviceName) {
            alert(`‚ñ∂Ô∏è Starting backup for device "${deviceName}" (all shares)...\n\nThe backup is now running in the background. You'll receive an email notification when it completes.`);
        }

        function showAddDeviceModal() {
            alert('Add Device modal would open here:\n\n1. Device Name\n2. Protocol (SMB/SSH/Rsync)\n3. Host/Address\n4. Credentials\n5. Device-Level Schedule (optional)\n6. Device-Level Retention (optional)\n\nConfiguration cascades: Global Defaults ‚Üí Device ‚Üí Share');
        }

        function showAddShareModal(deviceName) {
            alert(`Add Share modal for device "${deviceName}" would open here:\n\n1. Share Path\n2. Share-Level Schedule Override (optional)\n3. Share-Level Retention Override (optional)\n4. Share-Level Exclusions\n\nThis share will inherit device settings unless overridden.`);
        }

        // Close modal when clicking outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>
